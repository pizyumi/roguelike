## „É≠„Éº„Ç∞„É©„Ç§„ÇØ„Ç≤„Éº„É†„Çí‰Ωú„Å£„Å¶„Åø„Çã„Åù„ÅÆ3 „Éó„É¨„Ç§„É§„Éº„ÅÆÁßªÂãï

ÂÖÉÈ¢®‰øóÂ¨¢„ÅÆ„ÇÜ„Çä„Å™„Åß„Åô„ÄÇ

È¢®‰øóÂ¨¢„Çí„ÇÑ„Å£„Åü„ÇâÁ≤æÁ•û„Åå„Éú„É≠„Éú„É≠„Å´„Å™„Å£„Å¶„Åó„Åæ„Å£„Åü„ÅÆ„Åß„ÄÅ„Å°„Çá„Å£„Å®Á∞°Âçò„Å™„Ç≤„Éº„É†„Åß„ÇÇ‰Ωú„Å£„Å¶„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åô„Çã„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇ

### ÈÅéÂéªË®ò‰∫ã‰∏ÄË¶ß

* [„Åù„ÅÆ1 „Çø„Ç§„Éà„É´ÁîªÈù¢]()
* [„Åù„ÅÆ2 „ÉÄ„É≥„Ç∏„Éß„É≥„Éª„Éó„É¨„Ç§„É§„Éº„ÅÆÁîüÊàê„Å®ÊèèÁîª]()

ÁèæÂú®„ÅÆ„Ç≥„Éº„Éâ„Å´„Å§„ÅÑ„Å¶„ÅØÂâçÂõû„ÅÆË®ò‰∫ã„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

### „Éó„É¨„Ç§„É§„Éº„ÅÆÁßªÂãï

„Åì„ÅÆ„Ç≤„Éº„É†„ÅØÂü∫Êú¨ÁöÑ„Å´„Ç≠„Éº„Éú„Éº„Éâ„Çí‰Ωø„Å£„Å¶Êìç‰Ωú„Åô„Çã„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇ

„Éó„É¨„Ç§„É§„Éº„ÅÆÁßªÂãï„ÅØÁü¢Âç∞„Ç≠„Éº„Çí‰Ωø„Å£„Å¶Ë°å„ÅÜ„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇ

„Åæ„Åö„ÄÅ„Éó„É¨„Ç§„É§„Éº„ÅØÂÖ®„Å¶„ÅÆ„Éû„Çπ„Å´ÁßªÂãï„Åß„Åç„ÇãË®≥„Åß„ÅØ„Å™„ÅÑ„ÅÆ„Åß„Åó„Åü„ÄÇ

Â∫ä„ÅÆ„Éû„Çπ„Å´„ÅØÁßªÂãï„Åß„Åç„Åæ„Åô„Åå„ÄÅÂ£Å„ÅÆ„Éû„Çπ„Å´„ÅØÁßªÂãï„Åß„Åç„Åæ„Åõ„Çì„ÄÇ

„Å§„Åæ„Çä„ÄÅ„Éû„Çπ„ÅÆÁ®ÆÈ°û„Å´„Çà„Å£„Å¶ÁßªÂãï„Åß„Åç„Çã„Åã„Å©„ÅÜ„Åã„ÅåÊ±∫„Åæ„Çä„Åæ„Åô„ÄÇ

„Åì„Çå„Çí`B_CAN_STAND`„Å®„ÅÑ„ÅÜÈÖçÂàó„Åß‰∏ã„ÅÆ„Çà„ÅÜ„Å´ÂÆöÁæ©„Åô„Çã„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇ`true`„ÅØÁßªÂãï„Åß„Åç„Çã„Éû„Çπ„Åß„ÅÇ„Çã„Åì„Å®„ÇíË°®„Åó„ÄÅ`false`„ÅØÁßªÂãï„Åß„Åç„Å™„ÅÑ„Éû„Çπ„Åß„ÅÇ„Çã„Åì„Å®„ÇíË°®„Åó„Åæ„Åô„ÄÇ

```js
var B_CAN_STAND = [];
B_CAN_STAND[B_FLOOR] = true;
B_CAN_STAND[B_WALL] = false;
```

„Åù„Åó„Å¶„ÄÅ„Ç≠„ÉºÂÖ•Âäõ„ÅÆÂá¶ÁêÜ„Çí‰∏ã„ÅÆ„Çà„ÅÜ„Å´Â§âÊõ¥„Åó„Åæ„Åô„ÄÇ

```js
	c.on('keydown', function (e) {
		if (!startf) {
			if (e.keyCode === 90) {
				startf = true;

				init();

				draw(con);
			}

			return;
		}

		if (e.keyCode >= 37 && e.keyCode <= 40) {
			var x = player.x;
			var y = player.y;
			if (e.keyCode === 37) {
				if (x === 0) {
					return;
				}
				x--;
			}
			else if (e.keyCode === 38) {
				if (y === 0) {
					return;
				}
				y--;
			}
			else if (e.keyCode === 39) {
				if (x === LX - 1) {
					return;
				}
				x++;
			}
			else if (e.keyCode === 40) {
				if (y === LY - 1) {
					return;
				}
				y++;
			}

			if (x !== player.x || y !== player.y) {
				var b = field[x][y];
				if (B_CAN_STAND[b.base]) {
					player.x = x;
					player.y = y;

					draw(con);
				}
			}
		}
	});
```

Áü¢Âç∞„Ç≠„Éº„ÅåÊäº„Åï„Çå„ÅüÊôÇ„ÅÆÂá¶ÁêÜ„ÅåËøΩÂä†„Åï„Çå„Åæ„Åó„Åü„ÄÇ

Áü¢Âç∞„Ç≠„Éº„ÅÆÁ®ÆÈ°û„Å´„Çà„Å£„Å¶„Éó„É¨„Ç§„É§„Éº„ÅÆÊñ∞„Åó„ÅÑ‰ΩçÁΩÆ„ÅåÊ±∫„Åæ„Çä„ÄÅ„Åù„ÅÆ‰ΩçÁΩÆ„ÅÆ„Éû„Çπ„ÅÆÁ®ÆÈ°û„ÅåÁßªÂãï„Åß„Åç„Çã„ÇÇ„ÅÆ„Åß„ÅÇ„ÇãÂ†¥Âêà„Å´„ÅØÁßªÂãï„ÅóÔºà„Éó„É¨„Ç§„É§„Éº„ÅÆ‰ΩçÁΩÆ„ÇíÊõ¥Êñ∞„ÅóÔºâ„ÄÅÂÜçÊèèÁîª„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ

[](https://codepen.io/pizyumi/pen/ExYOVwj)

<p class="codepen" data-height="600" data-theme-id="0" data-default-tab="result" data-user="pizyumi" data-slug-hash="ExYOVwj" style="height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="roguelike-3-1">
  <span>See the Pen <a href="https://codepen.io/pizyumi/pen/ExYOVwj/">
  roguelike-3-1</a> by pizyumi (<a href="https://codepen.io/pizyumi">@pizyumi</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

### Êñú„ÇÅÁßªÂãï

„É≠„Éº„Ç∞„É©„Ç§„ÇØ„Ç≤„Éº„É†„ÅØ„ÇÑ„Å£„Å±„ÇäÊñú„ÇÅÁßªÂãï„ÇÇ„Åß„Åç„Å™„ÅÑ„Å®„Åß„Åô„Çà„Å≠„ÄÇ

Êñú„ÇÅÁßªÂãï„ÇíÂÆüË£Ö„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ

Êñú„ÇÅÁßªÂãï„ÅØ`Shift`„Ç≠„Éº„ÇíÊäº„Åó„Å™„Åå„ÇâÁü¢Âç∞„Ç≠„Éº„ÇíÊäº„Åô„Åì„Å®„ÅßË°å„ÅÜ„Åì„Å®„Å®„Åó„Åæ„Åô„ÄÇ

ÂÆüË£Ö„Å´„Åä„ÅÑ„Å¶„ÅØÂ∞ë„Å™„Åè„Å®„ÇÇ‰ª•‰∏ã„ÅÆ2ÁÇπ„ÇíÊ∫Ä„Åü„ÅôÂøÖË¶Å„Åå„ÅÇ„Çã„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

* `Shift`„Ç≠„Éº„ÇíÊäº„Åó„Å¶„ÅÑ„ÇãÊôÇ„ÅÆ„Åø„Åó„ÅãÊñú„ÇÅÁßªÂãï„Åß„Åç„Å™„ÅÑÔºà`Shift`„Ç≠„Éº„ÇíÊäº„Åó„Å¶„ÅÑ„Å™„ÅÑ„ÅÆ„Å´Êñú„ÇÅÁßªÂãï„Åß„Åç„Å¶„ÅØ„Å™„Çâ„Å™„ÅÑÔºâ„ÄÇ
* `Shift`„Ç≠„Éº„ÇíÊäº„Åó„Å¶„ÅÑ„ÇãÊôÇ„Å´„ÅØÊñú„ÇÅÁßªÂãï„Åó„ÅãÂá∫Êù•„Å™„ÅÑÔºà`Shift`„Ç≠„Éº„ÇíÊäº„Åó„Å¶„ÅÑ„ÇãÊôÇ„Å´„ÅØ‰∏ä‰∏ãÂ∑¶Âè≥„ÅÆÁßªÂãï„ÅØ„Åß„Åç„Å¶„ÅØ„Å™„Çâ„Å™„ÅÑÔºâ„ÄÇ

„Åì„ÅÆ„Çà„ÅÜ„Å´„Åô„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅË™§Êìç‰Ωú„ÅåËµ∑„Åç„Å´„Åè„Åè„Å™„Çä„Åæ„Åô„ÄÇ

„Åì„ÅÆ„Çà„ÅÜ„Å™Êñú„ÇÅÁßªÂãï„ÅÆÂÆüË£ÖÊñπÊ≥ï„ÅØÂπæ„Å§„Åã„ÅÇ„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅÁßÅ„ÅØ‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£ÖÊñπÊ≥ï„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ

`keyl`„ÄÅ`keyu`„ÄÅ`keyr`„ÄÅ`keyd`„Å®„ÅÑ„ÅÜÂ§âÊï∞„ÇíÁî®ÊÑè„Åó„ÄÅÁü¢Âç∞„Ç≠„Éº„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÂ∏∏„Å´Áõ£Ë¶ñ„Åô„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ

„Åù„Åó„Å¶„ÄÅ`Shift`„Ç≠„Éº„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„Å´„ÅØ„Åì„Çå„Çâ„ÅÆÂ§âÊï∞„ÅÆÂÄ§„Çí„ÇÇ„Å®„Å´ÁßªÂãï„ÇíË°å„ÅÜ„Åπ„Åç„Åã„ÇíÂà§Êñ≠„Åó„Åæ„Åô„ÄÇ

```js
	var keyl = false;
	var keyu = false;
	var keyr = false;
	var keyd = false;

	var c = $('body');
	c.on('keydown', function (e) {
		if (e.keyCode === 37) {
			keyl = true;
		}
		else if (e.keyCode === 38) {
			keyu = true;
		}
		else if (e.keyCode === 39) {
			keyr = true;
		}
		else if (e.keyCode === 40) {
			keyd = true;
		}
		else {
			keyl = false;
			keyu = false;
			keyr = false;
			keyd = false;
		}
	});
	c.on('keyup', function (e) {
		if (e.keyCode === 37) {
			keyl = false;
		}
		else if (e.keyCode === 38) {
			keyu = false;
		}
		else if (e.keyCode === 39) {
			keyr = false;
		}
		else if (e.keyCode === 40) {
			keyd = false;
		}
	});
	c.on('keydown', function (e) {
		if (!startf) {
ÔºàÁúÅÁï•Ôºâ
		}

		if (e.keyCode >= 37 && e.keyCode <= 40) {
			var x = player.x;
			var y = player.y;
			if (e.shiftKey) {
				if (keyl && keyu) {
					if (x === 0 || y === 0) {
						return;
					}
					x--;
					y--;
				}
				else if (keyr && keyu) {
					if (x === LX - 1 || y === 0) {
						return;
					}
					x++;
					y--;
				}
				else if (keyl && keyd) {
					if (x === 0 || y === LY - 1) {
						return;
					}
					x--;
					y++;
				}
				else if (keyr && keyd) {
					if (x === LX - 1 || y === LY - 1) {
						return;
					}
					x++;
					y++;
				}
				else {
					return;
				}
			}
			else {
				if (e.keyCode === 37) {
					if (x === 0) {
						return;
					}
					x--;
				}
				else if (e.keyCode === 38) {
					if (y === 0) {
						return;
					}
					y--;
				}
				else if (e.keyCode === 39) {
					if (x === LX - 1) {
						return;
					}
					x++;
				}
				else if (e.keyCode === 40) {
					if (y === LY - 1) {
						return;
					}
					y++;
				}
			}

			if (x !== player.x || y !== player.y) {
				var b = field[x][y];
				if (B_CAN_STAND[b.base]) {
					player.x = x;
					player.y = y;

					draw(con);
				}
			}
		}
	});
```








### „ÉÄ„É≥„Ç∏„Éß„É≥ÁîüÊàê

„É≠„Éº„Ç∞„É©„Ç§„ÇØ„Ç≤„Éº„É†„ÅÆ„Éù„Ç§„É≥„Éà„Å£„Å¶‰ΩïÁÇπ„Åã„ÅÇ„Çã„Å®ÊÄù„ÅÜ„ÅÆ„Åß„Åô„Åå„ÄÅ„Åù„ÅÆ1„Å§„ÅØ„ÉÄ„É≥„Ç∏„Éß„É≥ÁîüÊàê„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

„É©„É≥„ÉÄ„É†ÁîüÊàê„Å™„ÅÆ„ÅØÂãøË´ñ„Åß„Åô„Åå„ÄÅÈÅ©Â∫¶„Å´Êé¢Á¥¢„Åó„ÇÑ„Åô„Åè„ÄÅ„Åù„Çå„Åß„ÅÑ„Å¶Êé¢Á¥¢„Åó„Åå„ÅÑ„ÅÆ„ÅÇ„Çã„ÉÄ„É≥„Ç∏„Éß„É≥„ÅåÁêÜÊÉ≥„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

„Åß„ÇÇ„ÄÅ„Åù„Çì„Å™„ÉÄ„É≥„Ç∏„Éß„É≥„ÇíÊúÄÂàù„Åã„ÇâÁîüÊàê„Åô„Çã„ÅÆ„Å£„Å¶Èõ£„Åó„ÅÑ„Åß„Åô„Çà„Å≠„ÄÇ

„Åù„Çå„Çà„ÇäÂÖà„Å´„Å®„Çä„ÅÇ„Åà„ÅöÂãï„Åè„ÇÇ„ÅÆ„Çí‰Ωú„Å£„Å¶„Åó„Åæ„ÅÑ„Åü„ÅÑ„Åß„Åô„ÄÇ

„Åù„Åì„Åß‰ªäÂõû„ÅØ„ÉÄ„É≥„Ç∏„Éß„É≥ÁîüÊàê„Å´„Å§„ÅÑ„Å¶„ÅØ‰Ωï„ÇÇËÄÉ„Åà„Åæ„Åõ„Çì„ÄÇ

Á©∫„Å£„ÅΩ„ÅÆÈÉ®Â±ã„Çí1„Å§‰Ωú„Çã„Å†„Åë„Å´„Åó„Åæ„Åô„ÄÇ

‰ªäÂõû„ÅØÊèèÁîªÂá¶ÁêÜ„ÅÆÂÆüË£Ö„ÇíÈ†ëÂºµ„Çä„Åæ„Åô„ÄÇ

---

„Åæ„Åö„ÉÄ„É≥„Ç∏„Éß„É≥„ÅÆÔºàÊö´ÂÆöÁöÑ„Å™Ôºâ‰ªïÊßò„ÇíÊ±∫„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ

* 2D
* Ê≠£ÊñπÂΩ¢„ÅÆ„Éû„Çπ„ÇíÁ∏¶Ê®™„Å´Êï∑„ÅçË©∞„ÇÅ„Çã
* Ê≠£ÊñπÂΩ¢„ÅÆ„Éû„Çπ„ÅØÁ∏¶Ê®™32„Éî„ÇØ„Çª„É´
* Â∫ä„Å®Â£Å„Åã„ÇâÊàê„Çä„ÄÅÂ∫ä„ÅØ„Éó„É¨„Ç§„É§„Éº„ÅåÊ≠©„Åë„Çã„Åå„ÄÅÂ£Å„ÅØÊ≠©„Åë„Å™„ÅÑ
* 1„Å§„ÅÆ„Éï„É≠„Ç¢„ÅÆÂ§ß„Åç„Åï„ÅØ25x25

„Å®„Çä„ÅÇ„Åà„Åö„Åì„Çì„Å™ÊÑü„Åò„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ

„Éï„É≠„Ç¢„ÅÆÂ§ß„Åç„Åï„Çí25x25„Å´„Åó„Åü„ÅÆ„ÅØ„ÄÅ„Åì„Çå„Å†„Å®„Éï„É≠„Ç¢„ÅÆÂ§ß„Åç„Åï„ÅØ25*32=800„Éî„ÇØ„Çª„É´„Å®„Å™„Çä„ÄÅ„Å°„Çá„ÅÜ„Å©„Ç≤„Éº„É†ÁîªÈù¢„Å´Âèé„Åæ„Çã„Åã„Çâ„Åß„Åô„ÄÇ

„Ç≤„Éº„É†ÁîªÈù¢„Å´Âèé„Åæ„Çâ„Å™„ÅÑ„Å®„Éï„É≠„Ç¢„ÅÆ‰∏ÄÈÉ®„Åó„ÅãÊèèÁîª„Åß„Åç„Å™„ÅÑ„Å®„ÅÑ„ÅÜ„Åì„Å®„Å´„Å™„ÇäÈù¢ÂÄí„Å™„ÅÆ„Åß„Åô„ÄÇ

ÂãøË´ñÊúÄÁµÇÁöÑ„Å´„ÅØ„ÇÇ„Å£„Å®Â∫É„ÅÑ„Éï„É≠„Ç¢„Å´„ÇÇÂØæÂøúÂèØËÉΩ„Å´„Åó„Å¶„ÅÑ„Åç„Åü„ÅÑ„Åß„Åô„Åå„ÄÇ

„Å®„ÅÑ„ÅÜË®≥„Åß„ÄÅ„Ç≥„Éº„Éâ„ÇíÊõ∏„ÅÑ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ

```
var LX = 25;
var LY = 25;
var PX = 32;
var PY = 32;
```

„Éï„É≠„Ç¢„ÅÆÂ§ß„Åç„Åï„Å®1„Éû„Çπ„ÅÆ„Éî„ÇØ„Çª„É´Êï∞„Åß„Åô„ÄÇ

```
var B_FLOOR = 0;
var B_WALL = 1;
```

„Éû„Çπ„ÅÆÁ®ÆÈ°û„ÇíÊï∞ÂÄ§„ÅßË°®„Åô„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇ

Â∫ä„ÅØ`0`„ÄÅÂ£Å„ÅØ`1`„Å®„Åó„Åæ„Åô„ÄÇ

```
function create_field () {
	var f = [];
	for (var i = 0; i < LX; i++) {
		f[i] = [];
		for (var j = 0; j < LY; j++) {
			if ((i === 0 || j === 0) || (i === LX -1 || j === LY - 1)) {
				f[i][j] = {
					base: B_WALL
				};
			}
			else {
				f[i][j] = {
					base: B_FLOOR
				};
			}
		}
	}

	return f;
}
```

„Éï„É≠„Ç¢„Çí‰ΩúÊàê„Åô„ÇãÈñ¢Êï∞„Åß„Åô„ÄÇ

Á´Ø„Å†„ÅëÂ£Å„Å´„Åó„ÄÅ„Åù„Çå‰ª•Â§ñ„ÅØÂ∫ä„Å´„Åó„Åæ„Åô„ÄÇ

```
var field = null;

function init () {
	field = create_field();
}
```

`init`Èñ¢Êï∞„ÇíÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ

„Éï„É≠„Ç¢„Çí‰ΩúÊàê„Åó„ÄÅ`field`Â§âÊï∞„Å´Ê†ºÁ¥ç„Åó„Åæ„Åô„ÄÇ

### „ÉÄ„É≥„Ç∏„Éß„É≥„ÅÆÊèèÁîª

Ê¨°„Å´„ÉÄ„É≥„Ç∏„Éß„É≥„ÅÆÊèèÁîª„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ

`draw`Èñ¢Êï∞„Å´‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç≥„Éº„Éâ„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ

```
	for (var i = 0; i < LX; i++) {
		for (var j = 0; j < LY; j++) {
			if (field[i][j].base === B_FLOOR) {
				con.fillStyle = 'white';
				con.beginPath();
				con.arc((i + 0.5) * PX, (j + 0.5) * PY, 1, 0, Math.PI * 2);
				con.closePath();
				con.fill();
			}
			else if (field[i][j].base === B_WALL) {
				con.strokeStyle = 'white';
				con.strokeRect(i * PX, j * PY, PX, PY);
				con.beginPath();
				con.moveTo(i * PX, j * PY);
				con.lineTo((i + 1) * PX, (j + 1) * PY);
				con.moveTo((i + 1) * PX, j * PY);
				con.lineTo(i * PX, (j + 1) * PY);
				con.closePath();
				con.stroke();
			}
		}
	}
```

„Éû„Çπ„ÅåÂ∫ä„ÅÆÂ†¥Âêà„Å´„ÅØÁôΩ„ÅÑÁÇπ„Çí„Éû„Çπ„ÅÆ‰∏≠ÂøÉ„Å´ÊèèÁîª„Åó„Åæ„Åô„ÄÇ

„Åæ„Åü„ÄÅ„Éû„Çπ„ÅåÂ£Å„ÅÆÂ†¥Âêà„ÅØÂõõËßí„Å´Âõ≤„Åæ„Çå„Åü√ó„ÇíÊèèÁîª„Åó„Åæ„Åô„ÄÇ

„Åì„Çå„Å´„Çà„ÇäÊèèÁîª„Åï„Çå„Çã„ÉÄ„É≥„Ç∏„Éß„É≥„ÅØ‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

![](p01.png)

### „Éó„É¨„Ç§„É§„Éº„ÅÆÁîüÊàê

Ê¨°„Å´„Éó„É¨„Ç§„É§„Éº„ÇíÁîüÊàê„Åó„Åæ„Åô„ÄÇ

`init`Èñ¢Êï∞„Çí‰∏ã„ÅÆ„Çà„ÅÜ„Å´Â§âÊõ¥„Åó„Åæ„Åô„ÄÇ

```
var player = null;

function init () {
	field = create_field();
	player = {
		x: 12, 
		y: 17
	};
}
```

„Éó„É¨„Ç§„É§„Éº„Çí‰ΩúÊàê„Åó„ÄÅ`player`Â§âÊï∞„Å´Ê†ºÁ¥ç„Åó„Åæ„Åô„ÄÇ

„Éó„É¨„Ç§„É§„Éº„ÅØ‰ª•‰∏ã„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ

* `x`„Éª„Éª„Éª„Éó„É¨„Ç§„É§„Éº„ÅÆ„ÉÄ„É≥„Ç∏„Éß„É≥„Å´„Åä„Åë„ÇãÊ®™ÊñπÂêë„ÅÆ‰ΩçÁΩÆ
* `y`„Éª„Éª„Éª„Éó„É¨„Ç§„É§„Éº„ÅÆ„ÉÄ„É≥„Ç∏„Éß„É≥„Å´„Åä„Åë„ÇãÁ∏¶ÊñπÂêë„ÅÆ‰ΩçÁΩÆ

„Éó„É¨„Ç§„É§„Éº„ÅÆ„ÉÄ„É≥„Ç∏„Éß„É≥„Å´„Åä„Åë„ÇãÊúÄÂàù„ÅÆ‰ΩçÁΩÆ„ÅØ`(12, 7)`„Å®„ÅÑ„ÅÜ„Åì„Å®„Å´„Åó„Åæ„Åó„Åü„ÄÇ

### „Éó„É¨„Ç§„É§„Éº„ÅÆÊèèÁîª

Ê¨°„Å´„Éó„É¨„Ç§„É§„Éº„ÅÆÊèèÁîª„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ

`draw`Èñ¢Êï∞„Å´‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç≥„Éº„Éâ„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ

```
	con.textBaseline = 'middle';
	con.textAlign = 'center';
	con.fillStyle = 'red';
	con.fillText('üö∂', player.x * PX + (PX / 2), player.y * PY + (PY / 2));
```

„Éó„É¨„Ç§„É§„Éº„Åå„ÅÑ„Çã„Éû„Çπ„Å´‰∫∫„ÅÆÁµµÊñáÂ≠ó„ÇíËµ§Ëâ≤„ÅßÊèèÁîª„Åó„Åæ„Åô„ÄÇ

„Åì„Çå„Å´„Çà„ÇäÊèèÁîª„Åï„Çå„Çã„ÉÄ„É≥„Ç∏„Éß„É≥„ÅØ‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

![](p02.png)

### ‰ªäÂõû„ÅØ„Åì„Åì„Åæ„Åß

‰ªäÂõû„ÅØ„Åì„Åì„Åæ„Åß„Åß„Åô„ÄÇ

`game.js`„ÅØ‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ

```
var TITLE = '„Ç∑„É≥„Éó„É´„É≠„Éº„Ç∞„É©„Ç§„ÇØ';

var SCREEN_X = 1600;
var SCREEN_Y = 800;

var LX = 25;
var LY = 25;
var PX = 32;
var PY = 32;

var B_FLOOR = 0;
var B_WALL = 1;

var startf = false;

var field = null;
var player = null;

$(function(){
	var canvas = document.getElementById('game');
	var con = canvas.getContext('2d');

	var c = $('body');
	c.on('keydown', function (e) {
		if (!startf) {
			if (e.keyCode === 90) {
				startf = true;
	
				init();
	
				draw(con);
			}
			
			return;
		}
	});

	draw(con);
});

function init () {
	field = create_field();
	player = {
		x: 12, 
		y: 17
	};
}

function create_field () {
	var f = [];
	for (var i = 0; i < LX; i++) {
		f[i] = [];
		for (var j = 0; j < LY; j++) {
			if ((i === 0 || j === 0) || (i === LX -1 || j === LY - 1)) {
				f[i][j] = {
					base: B_WALL
				};
			}
			else {
				f[i][j] = {
					base: B_FLOOR
				};
			}
		}
	}

	return f;
}

function draw (con) {
	con.fillStyle = 'black';
	con.fillRect(0, 0, SCREEN_X, SCREEN_Y);

	if (!startf) {
		con.textBaseline = 'alphabetic';
		con.textAlign = 'center';
		con.fillStyle = 'white';

		con.font = "48px consolas";
		con.fillText(TITLE, SCREEN_X / 2, SCREEN_Y / 4);

		con.font = "32px consolas";
		con.fillText('> „ÅØ„Åò„ÇÅ„Çã', SCREEN_X / 2, SCREEN_Y / 4 * 3);	

		return;
	}

	for (var i = 0; i < LX; i++) {
		for (var j = 0; j < LY; j++) {
			if (field[i][j].base === B_FLOOR) {
				con.fillStyle = 'white';
				con.beginPath();
				con.arc((i + 0.5) * PX, (j + 0.5) * PY, 1, 0, Math.PI * 2);
				con.closePath();
				con.fill();
			}
			else if (field[i][j].base === B_WALL) {
				con.strokeStyle = 'white';
				con.strokeRect(i * PX, j * PY, PX, PY);
				con.beginPath();
				con.moveTo(i * PX, j * PY);
				con.lineTo((i + 1) * PX, (j + 1) * PY);
				con.moveTo((i + 1) * PX, j * PY);
				con.lineTo(i * PX, (j + 1) * PY);
				con.closePath();
				con.stroke();
			}
		}
	}

	con.textBaseline = 'middle';
	con.textAlign = 'center';
	con.fillStyle = 'red';
	con.fillText('üö∂', player.x * PX + (PX / 2), player.y * PY + (PY / 2));
}
```

Ê¨°Âõû„ÅØ„Éó„É¨„Ç§„É§„Éº„ÅÆÁßªÂãï„ÇíË°å„ÅÑ„Åü„ÅÑ„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ
